BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "marketplaces" (
	"contract_address"	TEXT,
	"protocol"	TEXT,
	"name"	TEXT,
	"version"	decimal(5, 5),
	"create_dt"	DATE,
	PRIMARY KEY("contract_address")
);
CREATE TABLE IF NOT EXISTS "abi_events" (
	"anonymous"	INTEGER,
	"name"	TEXT,
	"type"	TEXT,
	"contract_address"	TEXT,
	"id"	INTEGER,
	"input_indexed"	INTEGER,
	"input_internalType"	TEXT,
	"input_name"	TEXT,
	"input_type"	TEXT,
	"input_id"	INTEGER
);
INSERT INTO "marketplaces" ("contract_address","protocol","name","version","create_dt") VALUES ('0x00000000006c3852cbef3e08e8df289169ede581','Seaport','OpenSea',1.1,'2024-06-05'),
 ('0x00000000000006c7676171937c444f6bde3d6282','Seaport','OpenSea',1.2,'2024-06-05'),
 ('0x0000000000000ad24e80fd803c6ac37206a45f15','Seaport','OpenSea',1.3,'2024-06-05'),
 ('0x00000000000001ad428e4906ae43d8f9852d0dd6','Seaport','OpenSea',1.4,'2024-06-05'),
 ('0x00000000000000adc04c56bf30ac9d3c0aaf14dc','Seaport','OpenSea',1.5,'2024-06-05'),
 ('0x0000000000000068f116a894984e2db1123eb395','Seaport','OpenSea',1.6,'2024-06-05'),
 ('0xb47e3cd837ddf8e4c57f05d70ab865de6e193bbb',NULL,'CRYPTOPUNKS',NULL,'2024-06-05'),
 ('0x1e4ede388cbc9f4b5c79681b7f94d36a11abebc9',NULL,'X2Y2',NULL,'2024-06-05'),
 ('0xf4d2888d29d722226fafa5d9b24f9164c092421e',NULL,'LooksRare',NULL,'2024-06-05'),
 ('0x5283d291dbcf85356a21ba090e6db59121208b44',NULL,'Blur',NULL,'2024-06-05'),
 ('0xba5bde662c17e2adff1075610382b9b691296350',NULL,'SuperRare',NULL,'2024-06-05'),
 ('0x3b3ee1931dc30c1957379fac9aba94d1c48a5405',NULL,'Foundation',NULL,'2024-06-05'),
 ('0xe5bfab544eca83849c53464f85b7164375bdaac1',NULL,'Zora',NULL,'2024-06-05'),
 ('0x0000000000e655fae4d56241588680f86e3b2377','LooksRare: Exchange','Looksrare',2,'2024-06-05'),
 ('0x39da41747a83aee658334415666f3ef92dd0d541',NULL,'Blur',NULL,'2024-06-05'),
 ('0x000000000000ad05ccc4f10045630fb830b95127',NULL,'Blur',NULL,'2024-06-05'),
 ('0xb2ecfe4e4d61f8790bbb9de2d1259b9e2410cea5',NULL,'Blur',NULL,'2024-06-05'),
 ('0x29469395eaf6f95920e59f858042f0e28d98a20b',NULL,'Blur',NULL,'2024-06-05'),
 ('0x74312363e45dcaba76c59ec49a7aa8a65a67eed3',NULL,'X2Y2',NULL,'2024-06-05'),
 ('0x59728544b08ab483533076417fbbb2fd0b17ce3a',NULL,'LooksRare',NULL,'2024-06-05'),
 ('0x00000000005228b791a99a61f36a130d50600106',NULL,'LooksRare',NULL,'2024-06-05'),
 ('0xcda72070e455bb31c7690a170224ce43623d0b6f',NULL,'Foundation',NULL,'2024-06-05'),
 ('0x65b49f7aee40347f5a90b714be4ef086f3fe5e2c',NULL,'SuperRare',NULL,'2024-06-05'),
 ('0x6d7c44773c52d396f43c2d511b81aa168e9a7a42',NULL,'SuperRare',NULL,'2024-06-05'),
 ('0x2947f98c42597966a0ec25e92843c09ac17fbaa7',NULL,'SuperRare',NULL,'2024-06-05'),
 ('0x41a322b28d0ff354040e2cbc676f0320d8c8850d',NULL,'SuperRare',NULL,'2024-06-05'),
 ('0x20f780a973856b93f63670377900c1d2a50a77c4',NULL,'Element',NULL,'2024-06-05'),
 ('0xb4e7b8946fa2b35912cc0581772cccd69a33000c',NULL,'Element',NULL,'2024-06-05'),
 ('0x2b2e8cda09bba9660dca5cb6233787738ad68329',NULL,'sudoswap',NULL,'2024-06-05'),
 ('0x6170b3c3a54c3d8c854934cbc314ed479b2b29a3',NULL,'Zora',3,'2024-06-05'),
 ('0x68d25992b1b04be8a70104de8cb598170ab9aad5',NULL,'trove',NULL,'2024-06-05');
INSERT INTO "abi_events" ("anonymous","name","type","contract_address","id","input_indexed","input_internalType","input_name","input_type","input_id") VALUES (0,'OrderValidated','event','0x00000000006c3852cbef3e08e8df289169ede581',3,1,'address','zone','address',3),
 (0,'OrderValidated','event','0x00000000006c3852cbef3e08e8df289169ede581',3,1,'address','zone','address',3),
 (0,'OrderValidated','event','0x00000000006c3852cbef3e08e8df289169ede581',3,1,'address','zone','address',3),
 (0,'OrdersMatched','event','0x00000000000006c7676171937c444f6bde3d6282',4,0,'bytes32[]','orderHashes','bytes32[]',4),
 (0,'OrdersMatched','event','0x0000000000000ad24e80fd803c6ac37206a45f15',4,0,'bytes32[]','orderHashes','bytes32[]',4),
 (0,'OrdersMatched','event','0x00000000000001ad428e4906ae43d8f9852d0dd6',4,0,'bytes32[]','orderHashes','bytes32[]',4),
 (0,'OrdersMatched','event','0x00000000000000adc04c56bf30ac9d3c0aaf14dc',4,0,'bytes32[]','orderHashes','bytes32[]',4),
 (0,'OrdersMatched','event','0x0000000000000068f116a894984e2db1123eb395',4,0,'bytes32[]','orderHashes','bytes32[]',4),
 (0,'PunkNoLongerForSale','event','0xb47e3cd837ddf8e4c57f05d70ab865de6e193bbb',7,1,NULL,'punkIndex','uint256',7),
 (0,'Transfer','event','0x1e4ede388cbc9f4b5c79681b7f94d36a11abebc9',2,0,'uint256','value','uint256',2),
 (0,'Transfer','event','0x1e4ede388cbc9f4b5c79681b7f94d36a11abebc9',2,0,'uint256','value','uint256',2),
 (0,'Transfer','event','0x1e4ede388cbc9f4b5c79681b7f94d36a11abebc9',2,0,'uint256','value','uint256',2),
 (0,'Transfer','event','0xf4d2888d29d722226fafa5d9b24f9164c092421e',2,0,'uint256','value','uint256',2),
 (0,'Transfer','event','0xf4d2888d29d722226fafa5d9b24f9164c092421e',2,0,'uint256','value','uint256',2),
 (0,'Transfer','event','0xf4d2888d29d722226fafa5d9b24f9164c092421e',2,0,'uint256','value','uint256',2),
 (0,'Transfer','event','0x5283d291dbcf85356a21ba090e6db59121208b44',4,0,'uint256','value','uint256',4),
 (0,'Transfer','event','0x5283d291dbcf85356a21ba090e6db59121208b44',4,0,'uint256','value','uint256',4),
 (0,'Transfer','event','0x5283d291dbcf85356a21ba090e6db59121208b44',4,0,'uint256','value','uint256',4),
 (0,'Upgraded','event','0xba5bde662c17e2adff1075610382b9b691296350',2,1,'address','implementation','address',2),
 (0,'Upgraded','event','0x3b3ee1931dc30c1957379fac9aba94d1c48a5405',1,1,'address','implementation','address',1),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'TakerBid','event','0x0000000000e655fae4d56241588680f86e3b2377',20,0,'uint256[3]','feeAmounts','uint256[3]',20),
 (0,'OwnershipTransferred','event','0x39da41747a83aee658334415666f3ef92dd0d541',0,1,'address','newOwner','address',0),
 (0,'OwnershipTransferred','event','0x39da41747a83aee658334415666f3ef92dd0d541',0,1,'address','newOwner','address',0),
 (0,'Upgraded','event','0x000000000000ad05ccc4f10045630fb830b95127',2,1,'address','implementation','address',2),
 (0,'Upgraded','event','0xb2ecfe4e4d61f8790bbb9de2d1259b9e2410cea5',2,1,'address','implementation','address',2),
 (0,'Upgraded','event','0x29469395eaf6f95920e59f858042f0e28d98a20b',2,1,'address','implementation','address',2),
 (0,'Upgraded','event','0x74312363e45dcaba76c59ec49a7aa8a65a67eed3',2,1,'address','implementation','address',2),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'TakerBid','event','0x59728544b08ab483533076417fbbb2fd0b17ce3a',10,0,'uint256','price','uint256',10),
 (0,'Sweep','event','0x00000000005228b791a99a61f36a130d50600106',6,0,'address','sweeper','address',6),
 (0,'Upgraded','event','0xcda72070e455bb31c7690a170224ce43623d0b6f',1,1,'address','implementation','address',1),
 (0,'Sold','event','0x6d7c44773c52d396f43c2d511b81aa168e9a7a42',9,0,'uint256','_tokenId','uint256',9),
 (0,'Sold','event','0x6d7c44773c52d396f43c2d511b81aa168e9a7a42',9,0,'uint256','_tokenId','uint256',9),
 (0,'Sold','event','0x6d7c44773c52d396f43c2d511b81aa168e9a7a42',9,0,'uint256','_tokenId','uint256',9),
 (0,'Sold','event','0x6d7c44773c52d396f43c2d511b81aa168e9a7a42',9,0,'uint256','_tokenId','uint256',9),
 (0,'Sold','event','0x6d7c44773c52d396f43c2d511b81aa168e9a7a42',9,0,'uint256','_tokenId','uint256',9),
 (0,'Sold','event','0x6d7c44773c52d396f43c2d511b81aa168e9a7a42',9,0,'uint256','_tokenId','uint256',9),
 (0,'Approval','event','0x41a322b28d0ff354040e2cbc676f0320d8c8850d',8,0,NULL,'_tokenId','uint256',8),
 (0,'Approval','event','0x41a322b28d0ff354040e2cbc676f0320d8c8850d',8,0,NULL,'_tokenId','uint256',8),
 (0,'Approval','event','0x41a322b28d0ff354040e2cbc676f0320d8c8850d',8,0,NULL,'_tokenId','uint256',8),
 (0,'OwnershipTransferred','event','0xb4e7b8946fa2b35912cc0581772cccd69a33000c',1,1,'address','newOwner','address',1),
 (0,'OwnershipTransferred','event','0xb4e7b8946fa2b35912cc0581772cccd69a33000c',1,1,'address','newOwner','address',1),
 (0,'RoyaltyPayout','event','0x6170b3c3a54c3d8c854934cbc314ed479b2b29a3',5,0,'uint256','amount','uint256',5),
 (0,'RoyaltyPayout','event','0x6170b3c3a54c3d8c854934cbc314ed479b2b29a3',5,0,'uint256','amount','uint256',5),
 (0,'RoyaltyPayout','event','0x6170b3c3a54c3d8c854934cbc314ed479b2b29a3',5,0,'uint256','amount','uint256',5),
 (0,'RoyaltyPayout','event','0x6170b3c3a54c3d8c854934cbc314ed479b2b29a3',5,0,'uint256','amount','uint256',5),
 (0,'Upgraded','event','0x68d25992b1b04be8a70104de8cb598170ab9aad5',1,1,'address','implementation','address',1);
CREATE VIEW v_nft_price_data AS
SELECT n.*, m.name as "marketplace" from nft_price_data n
left join marketplaces m on lower(n.transaction_interacted_contract) = lower(m.contract_address);
COMMIT;
